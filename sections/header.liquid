{% comment %}STHLM Header - Smyths-Style See All Links{% endcomment %}

<!-- Top Utility Bar -->
<div style="background: linear-gradient(135deg, #1a52a8 0%, #2563eb 100%); color: white; padding: 8px 0; font-size: 13px; border-bottom: 1px solid rgba(255,255,255,0.15);">
  <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: flex; justify-content: flex-end;">
    <div style="display: flex; gap: 2.5rem; align-items: center;">
      <a
        href="/account/login"
        style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.4rem; font-weight: 500; transition: opacity 0.2s ease;"
        onmouseover="this.style.opacity='0.8';"
        onmouseout="this.style.opacity='1';"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
        <span>Log in / Sign up</span>
      </a>
      <a
        href="/account#orders"
        style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.4rem; font-weight: 500; transition: opacity 0.2s ease;"
        onmouseover="this.style.opacity='0.8';"
        onmouseout="this.style.opacity='1';"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
          <path d="m3.3 7 8.7 5 8.7-5"/>
          <path d="M12 22V12"/>
        </svg>
        <span>My orders</span>
      </a>
      <a
        href="/pages/help"
        style="color: white; text-decoration: none; display: flex; align-items: center; gap: 0.4rem; font-weight: 500; transition: opacity 0.2s ease;"
        onmouseover="this.style.opacity='0.8';"
        onmouseout="this.style.opacity='1';"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
          <path d="M12 17h.01"/>
        </svg>
        <span>Help</span>
      </a>
    </div>
  </div>
</div>

<!-- Main Header -->
<div class="sthlm-header">
  <div class="sthlm-header-content">
    <div>
      <a href="/" class="sthlm-logo">{{ shop.name }}</a>
    </div>
    <div class="sthlm-search">
      <form action="/search" method="get" class="search-form">
        <input
          type="search"
          name="q"
          placeholder="Search for product or brand"
          value="{{ search.terms | escape }}"
          class="search-input"
        >
        <button type="submit" class="search-button">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </button>
      </form>
    </div>
    <div class="sthlm-icons">
      <a href="/pages/wishlist" class="header-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
        </svg>
        <span>Wishlist</span>
      </a>
      <a href="/cart" class="header-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <path d="M16 10a4 4 0 0 1-8 0"/>
        </svg>
        <span>Cart ({{ cart.item_count }})</span>
      </a>
    </div>
  </div>
</div>

<!-- Navigation -->
<div
  class="nav-container"
  style="background: linear-gradient(135deg, #2d6ccd 0%, #1e5dbc 100%); padding: 0.8rem 0; position: relative; border-top: 1px solid rgba(255,255,255,0.15);"
>
  <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
    {% if linklists['mega-menu'].links.size > 0 %}
      <nav style="display: flex; gap: 0;">
        {% for link in linklists['mega-menu'].links %}
          <div class="mega-nav-item" style="position: relative; flex: 1;">
            <a href="{{ link.url }}" class="mega-nav-link" data-menu="{{ forloop.index }}">
              {{ link.title }}
            </a>

            {% if link.links.size > 0 %}
              <div class="mega-menu-panel" id="mega-panel-{{ forloop.index }}">
                <div class="mega-menu-content">
                  <div
                    class="
                      mega-menu-grid
                      {% if link.title == 'Toys' %}mega-menu-grid--toys{% endif %}
                      {% if link.title == 'By Brands' %}mega-menu-grid--brands{% endif %}
                    "
                  >
                    {% for childlink in link.links %}
                      {% if childlink.links.size > 0 %}
                        <div class="mega-menu-column">
                          <h3 class="mega-menu-category">
                            <a href="{{ childlink.url }}">{{ childlink.title }}</a>
                          </h3>
                          <ul class="mega-menu-items">
                            {% for grandchildlink in childlink.links %}
                              <li>
                                <a href="{{ grandchildlink.url }}">{{ grandchildlink.title }}</a>
                              </li>
                            {% endfor %}
                          </ul>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </nav>
    {% endif %}
  </div>
</div>

<style>
  .sthlm-header {
    background: linear-gradient(135deg, #1e5dbc 0%, #2d6ccd 100%);
    color: white;
    padding: 1.2rem 0;
  }

  .sthlm-header-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 2rem;
  }

  .sthlm-logo {
    font-size: 2rem;
    font-weight: bold;
    color: white;
    text-decoration: none;
  }

  .sthlm-search {
    max-width: 600px;
    width: 100%;
  }

  .search-form {
    display: flex;
    align-items: stretch;
    border-radius: 25px;
    overflow: hidden;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
  }

  .search-input {
    flex: 1;
    padding: 14px 22px;
    border: none;
    font-size: 16px;
    outline: none;
    background: white;
  }

  .search-button {
    background: #ffd700;
    border: none;
    padding: 14px 22px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }

  .search-button:hover {
    background: #ffed4e;
    transform: translateY(-1px);
  }

  .search-button svg {
    color: #333;
  }

  .sthlm-icons {
    display: flex;
    gap: 1.5rem;
    align-items: center;
  }

  .header-icon {
    color: white;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.6rem 0.8rem;
    border-radius: 0.6rem;
    transition: all 0.2s ease;
  }

  .header-icon:hover {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    transform: translateY(-1px);
  }

  .header-icon span {
    font-size: 1.4rem;
    font-weight: 500;
  }

  /* CLEAN NAV LINKS */
  .mega-nav-link {
    display: block;
    color: white;
    text-decoration: none;
    padding: 1rem 2rem;
    text-align: center;
    font-weight: 600;
    font-size: 1.6rem;
    transition: all 0.2s ease;
    border-radius: 0.5rem 0.5rem 0 0;
  }

  .mega-nav-link:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #ffd700;
    transform: translateY(-2px);
  }

  /* MEGA MENU */
  .mega-menu-panel {
    position: fixed;
    top: auto;
    left: 0;
    right: 0;
    width: 100vw;
    background: linear-gradient(135deg, #f8faff 0%, #f1f5ff 100%);
    border-top: 3px solid #ffd700;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-15px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .mega-nav-item:hover .mega-menu-panel {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .mega-menu-content {
    padding: 4rem 3rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  /* SMART GRID LAYOUTS */
  .mega-menu-grid {
    display: grid;
    gap: 3rem 2rem;
    align-items: start;
  }

  /* Toys - More columns for longer category names */
  .mega-menu-grid--toys {
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  /* Brands - Fewer columns for shorter names */
  .mega-menu-grid--brands {
    grid-template-columns: repeat(4, 1fr);
  }

  .mega-menu-column {
    min-height: 180px;
  }

  /* BETTER TYPOGRAPHY */
  .mega-menu-category {
    margin: 0 0 1.2rem 0;
    font-size: 1.6rem;
    font-weight: 700;
    color: #1e5dbc;
    border-bottom: 3px solid #1e5dbc;
    padding-bottom: 0.6rem;
    line-height: 1.3;
    word-wrap: break-word;
    hyphens: auto;
  }

  .mega-menu-category a {
    color: inherit;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .mega-menu-category a:hover {
    color: #2d6ccd;
  }

  .mega-menu-items {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .mega-menu-items li {
    margin-bottom: 0.6rem;
  }

  .mega-menu-items a {
    color: #4a5568;
    text-decoration: none;
    font-size: 1.3rem;
    line-height: 1.4;
    font-weight: 500;
    transition: all 0.2s ease;
    display: block;
    padding: 0.2rem 0;
  }

  .mega-menu-items a:hover {
    color: #1e5dbc;
    text-decoration: underline;
    text-underline-offset: 0.3rem;
    transform: translateX(3px);
  }

  /* SMYTHS-STYLE "SEE ALL" LINKS */
  .mega-menu-items li:last-child {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #e2e8f0;
  }

  .mega-menu-items li:last-child a {
    color: #1e5dbc !important;
    font-weight: 700 !important;
    font-size: 1.4rem !important;
    text-decoration: underline !important;
    text-underline-offset: 0.3rem !important;
    padding: 0.5rem 0 !important;
    margin: 0 !important;
    background: none !important;
    border-radius: 0 !important;
    text-align: left !important;
    transition: all 0.2s ease !important;
    border: none !important;
    text-transform: none !important;
  }

  .mega-menu-items li:last-child a:hover {
    color: #2d6ccd !important;
    text-decoration: underline !important;
    text-decoration-thickness: 2px !important;
    transform: translateX(5px) !important;
    background: none !important;
    box-shadow: none !important;
  }

  /* Mobile responsiveness */
  @media screen and (max-width: 990px) {
    .header-icon span {
      display: none;
    }

    .sthlm-icons {
      gap: 1rem;
    }

    .mega-menu-grid--toys,
    .mega-menu-grid--brands {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
    }
  }

  @media screen and (max-width: 749px) {
    .mega-menu-panel {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      overflow-y: auto;
      transform: translateX(100%);
      border-top: none;
    }

    .mega-nav-item:hover .mega-menu-panel {
      transform: translateX(0);
    }

    .mega-menu-grid--toys,
    .mega-menu-grid--brands {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu"
    }
  ]
}
{% endschema %}
